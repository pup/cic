!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Cic=n():t.Cic=n()}(this,(function(){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s="tjUo")}({"0sLt":function(t,n,e){var o=e("Ejun"),r=e("li+o").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},"27hh":function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},"2Irq":function(t,n,e){var o=e("JD54"),r=e("MSP0"),i=e("aQwD")("species");t.exports=function(t,n){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)?o(e)&&null===(e=e[i])&&(e=void 0):e=void 0),new(void 0===e?Array:e)(0===n?0:n)}},"39ce":function(t,n,e){"use strict";var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!o.call({1:2},1);n.f=i?function(t){var n=r(this,t);return!!n&&n.enumerable}:o},"4PXY":function(t,n){var e=0,o=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+o).toString(36)}},"4tLJ":function(t,n,e){var o=e("xOqd");t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},A71X:function(t,n,e){var o=e("U1xW"),r=e("rzr1"),i=e("Bt5z"),c=function(t){return function(n,e,c){var s,u=o(n),f=r(u.length),a=i(c,f);if(t&&e!=e){for(;f>a;)if((s=u[a++])!=s)return!0}else for(;f>a;a++)if((t||a in u)&&u[a]===e)return t||a||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},Bt5z:function(t,n,e){var o=e("YDew"),r=Math.max,i=Math.min;t.exports=function(t,n){var e=o(t);return e<0?r(e+n,0):i(e,n)}},CQSR:function(t,n,e){var o=e("j0fE");t.exports=o("navigator","userAgent")||""},Dm9E:function(t,n,e){var o=e("x0Cr"),r=e("kQe3").f,i=e("Gnjn"),c=e("n3KG"),s=e("QG+J"),u=e("tdk/"),f=e("h4kc");t.exports=function(t,n){var e,a,p,h,l,d=t.target,g=t.global,v=t.stat;if(e=g?o:v?o[d]||s(d,{}):(o[d]||{}).prototype)for(a in n){if(h=n[a],p=t.noTargetGet?(l=r(e,a))&&l.value:e[a],!f(g?a:d+(v?".":"#")+a,t.forced)&&void 0!==p){if(typeof h==typeof p)continue;u(h,p)}(t.sham||p&&p.sham)&&i(h,"sham",!0),c(e,a,h,t)}}},Ejun:function(t,n,e){var o=e("oWMI"),r=e("U1xW"),i=e("A71X").indexOf,c=e("WCtK");t.exports=function(t,n){var e,s=r(t),u=0,f=[];for(e in s)!o(c,e)&&o(s,e)&&f.push(e);for(;n.length>u;)o(s,e=n[u++])&&(~i(f,e)||f.push(e));return f}},Gnjn:function(t,n,e){var o=e("sEmX"),r=e("SQpw"),i=e("X4oS");t.exports=o?function(t,n,e){return r.f(t,n,i(1,e))}:function(t,n,e){return t[n]=e,t}},GzSk:function(t,n,e){var o=e("n3KG"),r=Date.prototype,i=r.toString,c=r.getTime;new Date(NaN)+""!="Invalid Date"&&o(r,"toString",(function(){var t=c.call(this);return t==t?i.call(this):"Invalid Date"}))},JD54:function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},Jg8x:function(t,n,e){var o=e("jhOc"),r=e("27hh"),i="".split;t.exports=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?i.call(t,""):Object(t)}:Object},KYMw:function(t,n,e){var o=e("JD54");t.exports=function(t,n){if(!o(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!o(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!o(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!o(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},MSP0:function(t,n,e){var o=e("27hh");t.exports=Array.isArray||function(t){return"Array"==o(t)}},MbKD:function(t,n,e){var o=e("WCMJ"),r=e("Jg8x"),i=e("ckO5"),c=e("rzr1"),s=e("2Irq"),u=[].push,f=function(t){var n=1==t,e=2==t,f=3==t,a=4==t,p=6==t,h=5==t||p;return function(l,d,g,v){for(var y,m,_=i(l),x=r(_),w=o(d,g,3),S=c(x.length),b=0,j=v||s,L=n?j(l,S):e?j(l,0):void 0;S>b;b++)if((h||b in x)&&(m=w(y=x[b],b,_),t))if(n)L[b]=m;else if(m)switch(t){case 3:return!0;case 5:return y;case 6:return b;case 2:u.call(L,y)}else if(a)return!1;return p?-1:f||a?a:L}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},"NQ+N":function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},NpPP:function(t,n,e){var o=e("sEmX"),r=e("jhOc"),i=e("fXPl");t.exports=!o&&!r((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"Nvt/":function(t,n,e){"use strict";var o=e("MbKD").forEach,r=e("rQpp");t.exports=r("forEach")?function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"QG+J":function(t,n,e){var o=e("x0Cr"),r=e("Gnjn");t.exports=function(t,n){try{r(o,t,n)}catch(e){o[t]=n}return n}},R6mi:function(t,n,e){var o=e("x0Cr");t.exports=o},S8th:function(t,n,e){var o=e("jf3w"),r=e("WA4Y");(t.exports=function(t,n){return r[t]||(r[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.6.1",mode:o?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},SGGC:function(t,n,e){"use strict";var o=e("Dm9E"),r=e("MbKD").filter,i=e("jhOc"),c=e("nXJ7")("filter"),s=c&&!i((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));o({target:"Array",proto:!0,forced:!c||!s},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},SQpw:function(t,n,e){var o=e("sEmX"),r=e("NpPP"),i=e("kc9B"),c=e("KYMw"),s=Object.defineProperty;n.f=o?s:function(t,n,e){if(i(t),n=c(n,!0),i(e),r)try{return s(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported");return"value"in e&&(t[n]=e.value),t}},U1xW:function(t,n,e){var o=e("Jg8x"),r=e("NQ+N");t.exports=function(t){return o(r(t))}},WA4Y:function(t,n,e){var o=e("x0Cr"),r=e("QG+J"),i=o["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=i},WCMJ:function(t,n,e){var o=e("slpu");t.exports=function(t,n,e){if(o(t),void 0===n)return t;switch(e){case 0:return function(){return t.call(n)};case 1:return function(e){return t.call(n,e)};case 2:return function(e,o){return t.call(n,e,o)};case 3:return function(e,o,r){return t.call(n,e,o,r)}}return function(){return t.apply(n,arguments)}}},WCtK:function(t,n){t.exports={}},X4oS:function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},YDew:function(t,n){var e=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:e)(t)}},aQwD:function(t,n,e){var o=e("x0Cr"),r=e("S8th"),i=e("oWMI"),c=e("4PXY"),s=e("xOqd"),u=e("4tLJ"),f=r("wks"),a=o.Symbol,p=u?a:a&&a.withoutSetter||c;t.exports=function(t){return i(f,t)||(s&&i(a,t)?f[t]=a[t]:f[t]=p("Symbol."+t)),f[t]}},aqbJ:function(t,n,e){var o=e("WA4Y"),r=Function.toString;"function"!=typeof o.inspectSource&&(o.inspectSource=function(t){return r.call(t)}),t.exports=o.inspectSource},ckO5:function(t,n,e){var o=e("NQ+N");t.exports=function(t){return Object(o(t))}},eHOh:function(t,n,e){var o=e("j0fE"),r=e("0sLt"),i=e("gFni"),c=e("kc9B");t.exports=o("Reflect","ownKeys")||function(t){var n=r.f(c(t)),e=i.f;return e?n.concat(e(t)):n}},fXPl:function(t,n,e){var o=e("x0Cr"),r=e("JD54"),i=o.document,c=r(i)&&r(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},gFni:function(t,n){n.f=Object.getOwnPropertySymbols},h4kc:function(t,n,e){var o=e("jhOc"),r=/#|\.prototype\./,i=function(t,n){var e=s[c(t)];return e==f||e!=u&&("function"==typeof n?o(n):!!n)},c=i.normalize=function(t){return String(t).replace(r,".").toLowerCase()},s=i.data={},u=i.NATIVE="N",f=i.POLYFILL="P";t.exports=i},j0fE:function(t,n,e){var o=e("R6mi"),r=e("x0Cr"),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,n){return arguments.length<2?i(o[t])||i(r[t]):o[t]&&o[t][n]||r[t]&&r[t][n]}},jf3w:function(t,n){t.exports=!1},jhOc:function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},jhQz:function(t,n,e){var o=e("x0Cr"),r=e("aqbJ"),i=o.WeakMap;t.exports="function"==typeof i&&/native code/.test(r(i))},kQe3:function(t,n,e){var o=e("sEmX"),r=e("39ce"),i=e("X4oS"),c=e("U1xW"),s=e("KYMw"),u=e("oWMI"),f=e("NpPP"),a=Object.getOwnPropertyDescriptor;n.f=o?a:function(t,n){if(t=c(t),n=s(n,!0),f)try{return a(t,n)}catch(t){}if(u(t,n))return i(!r.f.call(t,n),t[n])}},kc9B:function(t,n,e){var o=e("JD54");t.exports=function(t){if(!o(t))throw TypeError(String(t)+" is not an object");return t}},"li+o":function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},lzI5:function(t,n,e){"use strict";var o=e("Dm9E"),r=e("Nvt/");o({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},n3KG:function(t,n,e){var o=e("x0Cr"),r=e("Gnjn"),i=e("oWMI"),c=e("QG+J"),s=e("aqbJ"),u=e("oohu"),f=u.get,a=u.enforce,p=String(String).split("String");(t.exports=function(t,n,e,s){var u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof e&&("string"!=typeof n||i(e,"name")||r(e,"name",n),a(e).source=p.join("string"==typeof n?n:"")),t!==o?(u?!h&&t[n]&&(f=!0):delete t[n],f?t[n]=e:r(t,n,e)):f?t[n]=e:c(n,e)})(Function.prototype,"toString",(function(){return"function"==typeof this&&f(this).source||s(this)}))},nWM9:function(t,n,e){var o,r,i=e("x0Cr"),c=e("CQSR"),s=i.process,u=s&&s.versions,f=u&&u.v8;f?r=(o=f.split("."))[0]+o[1]:c&&(!(o=c.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=c.match(/Chrome\/(\d+)/))&&(r=o[1]),t.exports=r&&+r},nXJ7:function(t,n,e){var o=e("jhOc"),r=e("aQwD"),i=e("nWM9"),c=r("species");t.exports=function(t){return i>=51||!o((function(){var n=[];return(n.constructor={})[c]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},oWMI:function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},oohu:function(t,n,e){var o,r,i,c=e("jhQz"),s=e("x0Cr"),u=e("JD54"),f=e("Gnjn"),a=e("oWMI"),p=e("x83m"),h=e("WCtK"),l=s.WeakMap;if(c){var d=new l,g=d.get,v=d.has,y=d.set;o=function(t,n){return y.call(d,t,n),n},r=function(t){return g.call(d,t)||{}},i=function(t){return v.call(d,t)}}else{var m=p("state");h[m]=!0,o=function(t,n){return f(t,m,n),n},r=function(t){return a(t,m)?t[m]:{}},i=function(t){return a(t,m)}}t.exports={set:o,get:r,has:i,enforce:function(t){return i(t)?r(t):o(t,{})},getterFor:function(t){return function(n){var e;if(!u(n)||(e=r(n)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return e}}}},rQpp:function(t,n,e){"use strict";var o=e("jhOc");t.exports=function(t,n){var e=[][t];return!e||!o((function(){e.call(null,n||function(){throw 1},1)}))}},rzr1:function(t,n,e){var o=e("YDew"),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},sEmX:function(t,n,e){var o=e("jhOc");t.exports=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},slpu:function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"tc/l":function(t,n,e){var o=e("x0Cr"),r=e("xSDe"),i=e("Nvt/"),c=e("Gnjn");for(var s in r){var u=o[s],f=u&&u.prototype;if(f&&f.forEach!==i)try{c(f,"forEach",i)}catch(t){f.forEach=i}}},"tdk/":function(t,n,e){var o=e("oWMI"),r=e("eHOh"),i=e("kQe3"),c=e("SQpw");t.exports=function(t,n){for(var e=r(n),s=c.f,u=i.f,f=0;f<e.length;f++){var a=e[f];o(t,a)||s(t,a,u(n,a))}}},tjUo:function(t,n,e){"use strict";var o=e("tuwQ");t.exports={createConnection:function(){return new o}}},tuwQ:function(t,n,e){"use strict";e("SGGC"),e("lzI5"),e("GzSk"),e("tc/l");function o(t,n){"addEventListener"in document?window.addEventListener(t,n,!1):"attachEvent"in document&&window.attachEvent("on".concat(t),n)}function r(t,n){"addEventListener"in document?window.removeEventListener(t,n,!1):"attachEvent"in document&&window.dettachEvent("on".concat(t),n)}function i(t){this.connected=!1,this.destroyed=!1,this._disconnectListeners=[],this._connectListeners=[],this._messageListeners=[],this._connecting=!1,this._timeoutId=null,this._cicId=null,this._source=t||null,this._origin="*",this._timeoutId=null,this.__onMessage=this._onMessage.bind(this),this.__onBeforeUnload=this._onBeforeUnload.bind(this),o("message",this.__onMessage),o("beforeunload",this.__onBeforeUnload)}i.prototype._onMessage=function(t){var n=this;if(t.data&&t.data.cicId){var e=t.origin,o=t.source,r=t.data,i=r.cicId,c=r.msgType,s=r.data;if("ping"==c){if(this._cicId||this._connecting||this.connected)return;this._cicId=i,this._connecting=!0,this._source=o,this._origin=e,o.postMessage({cicId:i,msgType:"pong"},"*")}else"pong"==c&&this._connecting&&!this.connected&&this._cicId==i?(clearTimeout(this._timeoutId),this._source=o,this._origin=e,this.connected=!0,this._connecting=!1,o.postMessage({cicId:i,msgType:"pong_confirm"},"*"),setTimeout((function(){n._connectListeners.forEach((function(t){t()}))}),0)):"pong_confirm"==c&&this._connecting&&i==this._cicId?(this._connecting=!1,this.connected=!0,setTimeout((function(){n._connectListeners.forEach((function(t){t()}))}),0)):"disconnect"==c&&i==this._cicId?(this.connected=!1,this._connecting=!1,this._disconnectListeners.forEach((function(t){t()}))):"message"==c&&this.connected&&i==this._cicId&&this._messageListeners.forEach((function(t){t(s)}))}},i.prototype.onConnect=function(t){if(this.destroyed)throw new Error("当前Connection已销毁");this._connectListeners.push(t),this.connected&&t(this)},i.prototype.offConnect=function(t){this._connectListeners=this._connectListeners.filter((function(n){return n!=t}))},i.prototype.onDisconnect=function(t){if(this.destroyed)throw new Error("当前Connection已销毁");this._disconnectListeners.push(t)},i.prototype.offDisconnect=function(t){this._disconnectListeners=this._disconnectListeners.filter((function(n){return n!=t}))},i.prototype.onMessage=function(t){if(this.destroyed)throw new Error("当前Connection已销毁");this._messageListeners.push(t)},i.prototype.offMessage=function(t){this._messageListeners=this._messageListeners.filter((function(n){return n!=t}))},i.prototype._onBeforeUnload=function(){this.disconnect()},i.prototype.disconnect=function(){clearTimeout(this._timeoutId),this.connected=!1,this._connecting=!1,this._source&&this._source.postMessage({cicId:this._cicId,msgType:"disconnect"},"*")},i.prototype.destroy=function(){this.disconnect(),this._disconnectListeners.length=0,this._connectListeners.length=0,this._messageListeners.length=0,this.destroyed=!0,this._cicId=null,this._source=null,this._origin=null,this._timeoutId=null,r("message",this.__onMessage),r("beforeunload",this.__onBeforeUnload)},i.prototype.connect=function(t){var n=this;if(!t)throw new Error("connect方法需要传入参数domWindow");if(this.connected)throw new Error("当前Connection对象已建立连接");if(t.postMessage?this._source=t:t.contentWindow.postMessage&&(this._source=t.contentWindow),!this._source)throw new Error("参数对象 domWindow 不可用，无法发送消息到该窗口对象。postMessage方法不存在");this._cicId="cic_"+(new Date).getTime(),this._connecting=!0,this._source.postMessage({cicId:this._cicId,msgType:"ping"},"*"),this._timeoutId=setTimeout((function(){var e;e="正在尝试建立连接",console&&console.log&&console.log("< "+e),n._connecting=!1,n.connect(t)}),1e3)},i.prototype.sendMsg=function(t){if(!this.connected)throw new Error("连接尚未建立，请添加 onConnect 回调，确定建立连接后才可发送消息");this._source.postMessage({cicId:this._cicId,msgType:"message",data:t},"*")},t.exports=i},x0Cr:function(t,n,e){(function(n){var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof n&&n)||Function("return this")()}).call(this,e("yLpj"))},x83m:function(t,n,e){var o=e("S8th"),r=e("4PXY"),i=o("keys");t.exports=function(t){return i[t]||(i[t]=r(t))}},xOqd:function(t,n,e){var o=e("jhOc");t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())}))},xSDe:function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},yLpj:function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e}})}));
//# sourceMappingURL=cic.min.js.map