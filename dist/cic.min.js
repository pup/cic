!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Cic=e():t.Cic=e()}(this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="tjUo")}({A6NB:function(t,e){var n;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},r=function(){return n.apply(this instanceof o?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(o.prototype=this.prototype),r.prototype=new o,r}),function(){var t,e,n,o,r=Object.prototype,i=Function.call,c=i.bind(r.hasOwnProperty),s=i.bind(r.propertyIsEnumerable),l=i.bind(r.toString),u=c(r,"__defineGetter__");u&&(t=i.bind(r.__defineGetter__),e=i.bind(r.__defineSetter__),n=i.bind(r.__lookupGetter__),o=i.bind(r.__lookupSetter__));var a,p,f,h,d=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t};Object.getPrototypeOf||(Object.getPrototypeOf=function(t){var e=t.__proto__;return e||null===e?e:"[object Function]"===l(t.constructor)?t.constructor.prototype:t instanceof Object?r:null}),Object.keys||(Object.keys=(a=Object.prototype.hasOwnProperty,p=!{toString:null}.propertyIsEnumerable("toString"),h=(f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var e,n,o=[];for(e in t)a.call(t,e)&&o.push(e);if(p)for(n=0;n<h;n++)a.call(t,f[n])&&o.push(f[n]);return o})),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){if(t!==Object(t))throw TypeError("Object.getOwnPropertyNames called on non-object: "+t);return Object.keys(t)});var y,b=function(t){try{return t.sentinel=0,0===Object.getOwnPropertyDescriptor(t,"sentinel").value}catch(t){return!1}};if(Object.defineProperty){var m=b({});("undefined"==typeof document||b(document.createElement("div")))&&m||(y=Object.getOwnPropertyDescriptor)}if(!Object.getOwnPropertyDescriptor||y){Object.getOwnPropertyDescriptor=function(t,e){if(d(t))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+t);if(y)try{return y.call(Object,t,e)}catch(t){}var i;if(!c(t,e))return i;if(i={enumerable:s(t,e),configurable:!0},u){var l=t.__proto__,a=t!==r;a&&(t.__proto__=r);var p=n(t,e),f=o(t,e);if(a&&(t.__proto__=l),p||f)return p&&(i.get=p),f&&(i.set=f),i}return i.value=t[e],i.writable=!0,i}}var g,_=function(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(t){return!1}};if(Object.defineProperty){var v=_({}),w="undefined"==typeof document||_(document.createElement("div"));if(!v||!w)var O=Object.defineProperty,E=Object.defineProperties}if(!Object.defineProperty||O){Object.defineProperty=function(i,c,s){if(d(i))throw new TypeError("Object.defineProperty called on non-object: "+i);if(d(s))throw new TypeError("Property description must be an object: "+s);if(O)try{return O.call(Object,i,c,s)}catch(t){}if("value"in s)if(u&&(n(i,c)||o(i,c))){var l=i.__proto__;i.__proto__=r,delete i[c],i[c]=s.value,i.__proto__=l}else i[c]=s.value;else{var a="get"in s,p="set"in s;if(!u&&(a||p))return i;a&&t(i,c,s.get),p&&e(i,c,s.set)}return i}}if(Object.defineProperties&&!E||(Object.defineProperties=function(t,e){if(E)try{return E.call(Object,t,e)}catch(t){}for(var n=Object.keys(e),o=0;o<n.length;o++){var r=n[o];"__proto__"!==r&&Object.defineProperty(t,r,e[r])}return t}),!Object.create){var j,S=!({__proto__:null}instanceof Object);j=S||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var t=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(t){return!1}}()?function(){var t,e;return(e=new ActiveXObject("htmlfile")).write("<script><\/script>"),e.close(),t=e.parentWindow.Object.prototype,e=null,t}():function(){var t,e=document.createElement("iframe"),n=document.body||document.documentElement;return e.style.display="none",n.appendChild(e),e.src="javascript:",t=e.contentWindow.Object.prototype,n.removeChild(e),e=null,t}();delete t.constructor,delete t.hasOwnProperty,delete t.propertyIsEnumerable,delete t.isPrototypeOf,delete t.toLocaleString,delete t.toString,delete t.valueOf;var e=function(){};return e.prototype=t,j=function(){return new e},new e},Object.create=function(t,e){var n,o=function(){};if(null===t)n=j();else{if(null!==t&&d(t))throw new TypeError("Object prototype may only be an Object or null");o.prototype=t,(n=new o).__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}}Object.seal||(Object.seal=function(t){if(Object(t)!==t)throw new TypeError("Object.seal can only be called on Objects.");return t}),Object.freeze||(Object.freeze=function(t){if(Object(t)!==t)throw new TypeError("Object.freeze can only be called on Objects.");return t});try{Object.freeze((function(){}))}catch(t){Object.freeze=(g=Object.freeze,function(t){return"function"==typeof t?t:g(t)})}Object.preventExtensions||(Object.preventExtensions=function(t){if(Object(t)!==t)throw new TypeError("Object.preventExtensions can only be called on Objects.");return t}),Object.isSealed||(Object.isSealed=function(t){if(Object(t)!==t)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(t){if(Object(t)!==t)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)!==t)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var e="";c(t,e);)e+="?";t[e]=!0;var n=c(t,e);return delete t[e],n})}(),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,o;if(null==this)throw new TypeError("Array.prototype.forEach called on null or undefined");var r=Object(this),i=r.length>>>0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),o=0;o<i;){var c;o in r&&(c=r[o],t.call(n,c,o,r)),o++}}),Array.prototype.every||(Array.prototype.every=function(t){if(null==this)throw new TypeError("Array.prototype.every called on null or undefined");var e=Object(this),n=e.length>>>0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(var o=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in e&&!t.call(o,e[r],r,e))return!1;return!0}),Array.prototype.fill||(Array.prototype.fill=function(t){if(null==this)throw new TypeError("Array.prototype.fill called on null or undefined");for(var e=Object(this),n=e.length>>>0,o=arguments[1],r=o>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),c=arguments[2],s=void 0===c?n:c>>0,l=s<0?Math.max(n+s,0):Math.min(s,n);i<l;)e[i]=t,i++;return e}),Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError("Array.prototype.filter called on null or undefined");var e=Object(this),n=e.length>>>0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(var o=[],r=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)if(i in e){var c=e[i];t.call(r,c,i,e)&&o.push(c)}return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(null==this)throw new TypeError("Array.prototype.indexOf called on null or undefined");var n,o=Object(this),r=o.length>>>0;if(0===r)return-1;var i=0|e;if(i>=r)return-1;for(n=Math.max(i>=0?i:r-Math.abs(i),0);n<r;){if(n in o&&o[n]===t)return n;n++}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(null==this)throw new TypeError("Array.prototype.lastIndexOf called on null or undefined");var e,n,o=Object(this),r=o.length>>>0;if(0===r)return-1;for(e=r-1,arguments.length>1&&((e=Number(arguments[1]))!=e?e=0:0!=e&&e!=1/0&&e!=-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),n=e>=0?Math.min(e,r-1):r-Math.abs(e);n>=0;n--)if(n in o&&o[n]===t)return n;return-1}),Array.prototype.map||(Array.prototype.map=function(t,e){if(null==this)throw new TypeError("Array.prototype.map called on null or undefined");var n,o,r,i=Object(this),c=i.length>>>0;if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),o=new Array(c),r=0;r<c;){var s,l;r in i&&(s=i[r],l=t.call(n,s,r,i),o[r]=l),r++}return o}),Array.prototype.reduce||(Array.prototype.reduce=function(t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");var e,n=Object(this),o=n.length>>>0,r=0;if(arguments.length>=2)e=arguments[1];else{for(;r<o&&!(r in n);)r++;if(r>=o)throw new TypeError("Reduce of empty array with no initial value");e=n[r++]}for(;r<o;r++)r in n&&(e=t(e,n[r],r,n));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){if(null==this)throw new TypeError("Array.prototype.reduceRight called on null or undefined");if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");var e,n=Object(this),o=n.length>>>0,r=o-1;if(arguments.length>=2)e=arguments[1];else{for(;r>=0&&!(r in n);)r--;if(r<0)throw new TypeError("Reduce of empty array with no initial value");e=n[r--]}for(;r>=0;r--)r in n&&(e=t(e,n[r],r,n));return e}),Array.prototype.some||(Array.prototype.some=function(t){if(null==this)throw new TypeError("Array.prototype.reduceRight called on null or undefined");if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(var e=Object(this),n=e.length>>>0,o=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in e&&t.call(o,e[r],r,e))return!0;return!1}),"TextRectangle"in(n=window)&&!("width"in n.TextRectangle.prototype)&&Object.defineProperties(n.TextRectangle.prototype,{width:{get:function(){return this.right-this.left}},height:{get:function(){return this.bottom-this.top}}}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toISOString||function(){function t(t){return t<10?"0"+t:t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),function(t){if("document"in t){var e,n=t.document;if(!n.getElementsByClassName&&n.querySelectorAll){var o=function(t){return t=String(t).replace(/^|\s+/g,"."),this.querySelectorAll(t)};[HTMLDocument,Element].forEach((function(t){t.prototype.getElementsByClassName=o}))}if(!("CustomEvent"in t)||"function"!=typeof t.CustomEvent){var r=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var o=n.createEvent("CustomEvent");return o.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),o};r.prototype=t.Event.prototype,t.CustomEvent=r}!function(){if("Element"in t&&!Element.prototype.matches){for(var e=["ms","o","moz","webkit"],o=0;o<e.length;o++){var r=e[o]+"MatchesSelector";if(r in Element.prototype)return void(Element.prototype.matches=Element.prototype[r])}n.querySelectorAll&&(Element.prototype.matches=function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1})}}(),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&(e=Object.getOwnPropertyDescriptor(Element.prototype,"innerText"),Object.defineProperty(Element.prototype,"textContent",{get:function(){return e.get.call(this)},set:function(t){return e.set.call(this,t)}}))}}(window),function(t){if(!("Event"in t&&"function"==typeof t.Event)){var e={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1},n=t.Event&&t.Event.prototype||null;if(t.Event=Window.prototype.Event=function(t,e){if(!t)throw new Error("Not enough arguments");var n;if("createEvent"in document){n=document.createEvent("Event");var o=!(!e||void 0===e.bubbles)&&e.bubbles,r=!(!e||void 0===e.cancelable)&&e.cancelable;return n.initEvent(t,o,r),n}return(n=document.createEventObject()).type=t,n.bubbles=!(!e||void 0===e.bubbles)&&e.bubbles,n.cancelable=!(!e||void 0===e.cancelable)&&e.cancelable,n},n&&Object.defineProperty(t.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:n}),!("createEvent"in document)){var o=function(n,o){var r=this;if(r===t&&n in e)throw new Error("In IE8 the event: "+n+" is not available on the window object.");r._events||(r._events={}),r._events[n]||(r._events[n]=function(t){var e,n=r._events[t.type].list,o=n.slice(),i=-1,c=o.length;for(t.preventDefault=function(){!1!==t.cancelable&&(t.returnValue=!1)},t.stopPropagation=function(){t.cancelBubble=!0},t.stopImmediatePropagation=function(){t.cancelBubble=!0,t.cancelImmediate=!0},t.currentTarget=r,t.target=t.target||t.srcElement||r,t.relatedTarget=t.fromElement?t.fromElement===t.target?t.toElement:t.fromElement:null,t.timeStamp=(new Date).getTime(),t.clientX&&(t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop);++i<c&&!t.cancelImmediate;)i in o&&(e=o[i],-1!==n.indexOf(e)&&"function"==typeof e&&e.call(r,t))},r._events[n].list=[],r.attachEvent&&r.attachEvent("on"+n,r._events[n])),r._events[n].list.push(o)},r=function(t,e){var n;this._events&&this._events[t]&&this._events[t].list&&-1!==(n=this._events[t].list.indexOf(e))&&(this._events[t].list.splice(n,1),this._events[t].list.length||(this.detachEvent&&this.detachEvent("on"+t,this._events[t]),delete this._events[t]))},i=function(t){if(!arguments.length)throw new Error("Not enough arguments");if(!t||"string"!=typeof t.type)throw new Error("DOM Events Exception 0");var e=this,n=t.type;try{if(!t.bubbles){t.cancelBubble=!0;var o=function(t){t.cancelBubble=!0,(e||window).detachEvent("on"+n,o)};this.attachEvent("on"+n,o)}this.fireEvent("on"+n,t)}catch(o){t.target=e;do{t.currentTarget=e,"_events"in e&&"function"==typeof e._events[n]&&e._events[n].call(e,t),"function"==typeof e["on"+n]&&e["on"+n].call(e,t),e=9===e.nodeType?e.parentWindow:e.parentNode}while(e&&!t.cancelBubble)}return!0};[Window,HTMLDocument,Element].forEach((function(t){t.prototype.addEventListener=o,t.prototype.removeEventListener=r,t.prototype.dispatchEvent=i})),document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}))}}}(window),function(t){function e(t,n,o,r){var i,c=n[o],s=parseFloat(c),l=c.split(/\d/)[0];return r=null!==r?r:/%|em/.test(l)&&t.parentElement?e(t.parentElement,t.parentElement.currentStyle,"fontSize",null):16,i="fontSize"===o?r:/width/i.test(o)?t.clientWidth:t.clientHeight,"em"===l?s*r:"in"===l?96*s:"pt"===l?96*s/72:"%"===l?s/100*i:s}function n(t,e){var n="border"===e?"Width":"",o=e+"Top"+n,r=e+"Right"+n,i=e+"Bottom"+n,c=e+"Left"+n;t[e]=(t[o]==t[r]==t[i]==t[c]?[t[o]]:t[o]==t[i]&&t[c]==t[r]?[t[o],t[r]]:t[c]==t[r]?[t[o],t[r],t[i]]:[t[o],t[r],t[i],t[c]]).join(" ")}function o(t){var o=t.currentStyle||{},r=e(t,o,"fontSize",null);for(var i in o)/width|height|margin.|padding.|border.+W/.test(i)&&"auto"!==this[i]?this[i]=e(t,o,i,r)+"px":"styleFloat"===i?this.float=o[i]:this[i]=o[i];return n(this,"margin"),n(this,"padding"),n(this,"border"),this.fontSize=r+"px",this}"getComputedStyle"in t&&"function"==typeof t.getComputedStyle||(o.prototype={constructor:o,getPropertyPriority:function(){},getPropertyValue:function(t){return this[t]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},t.getComputedStyle=function(t){return new o(t)})}(window),document.head=document.head||document.getElementsByTagName("head")[0],["abbr","article","aside","audio","bdi","canvas","data","datalist","details","dialog","figcaption","figure","footer","header","hgroup","main","mark","meter","nav","output","picture","progress","section","summary","template","time","video"].forEach((function(t){document.createElement(t)})),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+/,"").replace(/\s+$/,"")}),function(t){if(!("innerWidth"in t&&"innerHeight"in t&&"pageXOffset"in t&&"pageYOffset"in t)){var e=t.document,n=e.documentElement,o=e.body||e.createElement("body");Object.defineProperties(t,{innerWidth:{get:function(){return n.clientWidth}},innerHeight:{get:function(){return n.clientHeight}},pageXOffset:{get:r},pageYOffset:{get:i},scrollX:{get:r},scrollY:{get:i}})}function r(){return(n.scrollLeft||o.scrollLeft||0)-(n.clientLeft||o.clientLeft||0)}function i(){return(n.scrollTop||o.scrollTop||0)-(n.clientTop||o.clientTop||0)}}(window)},tjUo:function(t,e,n){"use strict";n("A6NB");var o=n("tuwQ");t.exports={createConnection:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new o(t)}}},tuwQ:function(t,e,n){"use strict";function o(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}function r(t,e){var n;console&&console.log&&console.log(e+" ::: "+(n=t,"[object String]"==Object.prototype.toString.call(n)?t:JSON.stringify(t)))}function i(t,e){"addEventListener"in document?window.addEventListener(t,e,!1):"attachEvent"in document&&window.attachEvent("on".concat(t),e)}function c(t,e){"removeEventListener"in document?window.removeEventListener(t,e,!1):"detachEvent"in document&&window.detachEvent("on".concat(t),e)}function s(t,e){t.postMessage(JSON.stringify(e),"*")}function l(t,e){"clear timeoutId = ".concat(t),window.clearTimeout(t)}function u(t){this.connected=!1,this.destroyed=!1,this._noneStr=t,this._disconnectListeners=[],this._connectListeners=[],this._messageListeners=[],this._connecting=!1,this._cicId=null,this._source=null,this._timeoutId=null,this.__onMessage=this._onMessage.bind(this),this.__onBeforeUnload=this._onBeforeUnload.bind(this),i("message",this.__onMessage),i("beforeunload",this.__onBeforeUnload)}u.prototype._onMessage=function(t){var e=this;if(t.data){var n=JSON.parse(t.data);if(this._noneStr,n.cicId){var r=t.source,i=n.cicId,c=n.msgType,u=n.data;if("ping"==c){if(this._cicId||this._connecting||this.connected)return;this._noneStr,this._cicId=i,this._connecting=!0,this._source=r,s(r,{cicId:i,msgType:"pong"})}else"pong"==c&&this._connecting&&!this.connected&&this._cicId==i?(this._connecting=!1,this.connected=!0,this._noneStr,l(this._timeoutId,this._noneStr),this._timeoutId=null,s(this._source,{cicId:i,msgType:"pong_confirm"}),setTimeout(function(){o(this,e),this._connectListeners.forEach((function(t){t()}))}.bind(this),0)):"pong_confirm"==c&&this._connecting&&i==this._cicId?(this._noneStr,this.connected=!0,this._connecting=!1,setTimeout(function(){o(this,e),this._connectListeners.forEach((function(t){t()}))}.bind(this),0)):"disconnect"==c&&i==this._cicId?(this._noneStr,l(this._timeoutId,this._noneStr),this.connected=!1,this._connecting=!1,this._disconnectListeners.forEach((function(t){t()}))):"message"==c&&this.connected&&i==this._cicId&&(this._noneStr,this._messageListeners.forEach((function(t){t(u)})))}}},u.prototype.onConnect=function(t){if(this.destroyed)throw new Error("当前Connection已销毁");this._connectListeners.push(t),this.connected&&t()},u.prototype.offConnect=function(t){this._connectListeners=this._connectListeners.filter((function(e){return e!=t}))},u.prototype.onDisconnect=function(t){if(this.destroyed)throw new Error("当前Connection已销毁");this._disconnectListeners.push(t)},u.prototype.offDisconnect=function(t){this._disconnectListeners=this._disconnectListeners.filter((function(e){return e!=t}))},u.prototype.onMessage=function(t){if(this.destroyed)throw new Error("当前Connection已销毁");this._messageListeners.push(t)},u.prototype.offMessage=function(t){this._messageListeners=this._messageListeners.filter((function(e){return e!=t}))},u.prototype._onBeforeUnload=function(){this._noneStr,this.destroy()},u.prototype.disconnect=function(){l(this._timeoutId,this._noneStr),this._timeoutId=null,this._source&&(s(this._source,{cicId:this._cicId,msgType:"disconnect"}),this.connected=!1,this._connecting=!1)},u.prototype.destroy=function(){this.disconnect(),this.destroyed=!0,this._disconnectListeners.length=0,this._connectListeners.length=0,this._messageListeners.length=0,this._cicId=null,this._source=null,this._timeoutId=null,c("message",this.__onMessage),c("beforeunload",this.__onBeforeUnload)},u.prototype.connect=function(t){var e=this;if(Date.now(),this._noneStr,!t)throw new Error("connect方法需要传入参数domWindow");if(this.connected)r("---\x3e 当前Connection对象已建立连接",this._noneStr);else if(this._connecting)r("---\x3e 当前Connection对象正在建立连接中");else{if(Date.now(),t.postMessage?this._source=t:t.contentWindow.postMessage&&(this._source=t.contentWindow),!this._source)throw new Error("参数对象 domWindow 不可用，postMessage方法不存在");this._cicId="cic_"+Date.now(),this._connecting=!0,this._noneStr,window.setTimeout((function(){s(this._source,{cicId:this._cicId,msgType:"ping"})}),0),l(this._timeoutId,this._noneStr),this._timeoutId=window.setTimeout(function(){o(this,e),r("正在尝试建立连接, this._cicId = ",this._noneStr),this._connecting=!1,this.connect(t)}.bind(this),2e3),"<<< created this._timeoutId = ".concat(this._timeoutId),this._noneStr}},u.prototype.sendMsg=function(t){if(!this.connected)throw new Error("连接尚未建立，请添加 onConnect 回调，确定建立连接后才可发送消息");s(this._source,{cicId:this._cicId,msgType:"message",data:t})},t.exports=u}})}));
//# sourceMappingURL=cic.min.js.map