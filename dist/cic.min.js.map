{"version":3,"sources":["webpack://Cic/webpack/universalModuleDefinition","webpack://Cic/webpack/bootstrap","webpack://Cic/./src/index.js","webpack://Cic/./src/Connection.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Connection","require","createConnection","noneStr","log2","msg","input","console","log","toString","JSON","stringify","addMsgListener","msgType","callback","document","window","addEventListener","attachEvent","removeMsgListener","removeEventListener","detachEvent","postMessage","target","clear","timeoutId","clearTimeout","connected","destroyed","_noneStr","_disconnectListeners","_connectListeners","_messageListeners","_connecting","_cicId","_source","_timeoutId","__onMessage","_onMessage","__onBeforeUnload","_onBeforeUnload","evt","data","evtData","parse","cicId","source","setTimeout","forEach","fn","onConnect","Error","push","offConnect","filter","f","onDisconnect","offDisconnect","onMessage","offMessage","destroy","disconnect","length","connect","domWindow","Date","now","contentWindow","sendMsg"],"mappings":"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","file":"cic.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Cic\"] = factory();\n\telse\n\t\troot[\"Cic\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"tjUo\");\n","// import \"es5-polyfill\";\n\nlet Connection = require('./Connection.js');\n\nmodule.exports = {\n  createConnection(noneStr = '') {\n    return new Connection(noneStr);\n  }\n}\n","function isString(input) {\n  return Object.prototype.toString.call(input) == '[object String]';\n}\n\n// function log(msg, noneStr) {\n//   console && console.log && console.log(noneStr + ' ::: ' + (isString(msg) ?\n//     msg :\n//     JSON.stringify(msg)));\n// }\n\nfunction log2(msg, noneStr) {\n  console && console.log && console.log(noneStr + ' ::: ' + (isString(msg) ?\n    msg :\n    JSON.stringify(msg)));\n}\n\nfunction addMsgListener(msgType, callback) {\n  if ('addEventListener' in document) {\n    window.addEventListener(msgType, callback, false);\n  } else if ('attachEvent' in document) {\n    window.attachEvent(`on${msgType}`, callback);\n  }\n}\n\nfunction removeMsgListener(msgType, callback) {\n  if ('removeEventListener' in document) {\n    window.removeEventListener(msgType, callback, false);\n  } else if ('detachEvent' in document) {\n    window.detachEvent(`on${msgType}`, callback);\n  }\n}\n\nfunction postMessage(target, msg) {\n  target.postMessage(JSON.stringify(msg), '*');\n}\n\nfunction clear(timeoutId, noneStr) {\n  window.clearTimeout(timeoutId);\n}\n\nlet lastConnectTime = 0;\n\nfunction Connection(noneStr) {\n  this.connected = false;\n  this.destroyed = false;\n\n  this._noneStr = noneStr;\n  this._disconnectListeners = [];\n  this._connectListeners = [];\n  this._messageListeners = [];\n  this._connecting = false;\n  this._cicId = null;\n  this._source = null;\n  this._timeoutId = null;\n\n  this.__onMessage = this._onMessage.bind(this);\n  this.__onBeforeUnload = this._onBeforeUnload.bind(this);\n\n  addMsgListener('message', this.__onMessage);\n  addMsgListener('beforeunload', this.__onBeforeUnload);\n}\n\nConnection.prototype._onMessage = function(evt) {\n  if (!evt.data) {\n    return;\n  }\n\n  let evtData = JSON.parse(evt.data);\n\n  if (!evtData.cicId) {\n    return;\n  }\n\n  let { source } = evt;\n  let { cicId, msgType, data } = evtData;\n\n  if (msgType == 'ping') {\n    if (this._cicId || this._connecting || this.connected) {\n      return;\n    }\n\n    this._cicId = cicId;\n    this._connecting = true;\n    this._source = source;\n\n    postMessage(source, {\n      cicId,\n      msgType: 'pong'\n    });\n  } else if (\n    msgType == 'pong' &&\n    this._connecting &&\n    !this.connected &&\n    this._cicId == cicId\n  ) {\n    this._connecting = false;\n    this.connected = true;\n\n    clear(this._timeoutId, this._noneStr);\n    this._timeoutId = null;\n\n    postMessage(this._source, {\n      cicId,\n      msgType: 'pong_confirm'\n    });\n\n    setTimeout(() => {\n      this._connectListeners.forEach(function(fn) {\n        fn();\n      });\n    }, 0);\n  } else if (\n    msgType == 'pong_confirm' &&\n    this._connecting &&\n    cicId == this._cicId\n  ) {\n    this.connected = true;\n    this._connecting = false;\n\n    setTimeout(() => {\n      this._connectListeners.forEach(function(fn) {\n        fn();\n      });\n    }, 0);\n  } else if (\n    msgType == 'disconnect' &&\n    cicId == this._cicId\n  ) {\n    clear(this._timeoutId, this._noneStr);\n    this._timeoutId = null;\n    this.connected = false;\n    this._connecting = false;\n    this._cicId = null;\n    this._source = null;\n\n    this._disconnectListeners.forEach(function(fn) {\n      fn();\n    });\n  } else if (\n    msgType == 'message' &&\n    this.connected &&\n    cicId == this._cicId\n  ) {\n    this._messageListeners.forEach(function(fn) {\n      fn(data);\n    });\n  }\n};\n\nConnection.prototype.onConnect = function(fn) {\n  if (this.destroyed) {\n    throw new Error('当前Connection已销毁');\n  }\n\n  this._connectListeners.push(fn);\n\n  if (this.connected) {\n    fn();\n  }\n};\n\nConnection.prototype.offConnect = function(fn) {\n  this._connectListeners = this._connectListeners.filter(function(f) {\n    return f != fn;\n  });\n};\n\nConnection.prototype.onDisconnect = function(fn) {\n  if (this.destroyed) {\n    throw new Error('当前Connection已销毁');\n  }\n\n  this._disconnectListeners.push(fn);\n};\n\nConnection.prototype.offDisconnect = function(fn) {\n  this._disconnectListeners = this._disconnectListeners.filter(function(f) {\n    return f != fn;\n  });\n};\n\nConnection.prototype.onMessage = function(fn) {\n  if (this.destroyed) {\n    throw new Error('当前Connection已销毁');\n  }\n\n  this._messageListeners.push(fn);\n};\n\nConnection.prototype.offMessage = function(fn) {\n  this._messageListeners = this._messageListeners.filter(function(f) {\n    return f != fn;\n  });\n};\n\nConnection.prototype._onBeforeUnload = function() {\n  this.destroy();\n};\n\nConnection.prototype.disconnect = function() {\n  clear(this._timeoutId, this._noneStr);\n  this._timeoutId = null;\n\n  if (this._source) {\n    postMessage(this._source, {\n      cicId: this._cicId,\n      msgType: 'disconnect'\n    });\n\n    this.connected = false;\n    this._connecting = false;\n    this._source = null;\n    this._cicId = null;\n  }\n};\n\nConnection.prototype.destroy = function() {\n  this.disconnect();\n\n  this.destroyed = true;\n  this._disconnectListeners.length = 0;\n  this._connectListeners.length = 0;\n  this._messageListeners.length = 0;\n  this._cicId = null;\n  this._source = null;\n\n  removeMsgListener('message', this.__onMessage);\n  removeMsgListener('beforeunload', this.__onBeforeUnload);\n};\n\nConnection.prototype.connect = function(domWindow) {\n  if (!domWindow) {\n    throw new Error('connect方法需要传入参数domWindow');\n  }\n\n  if (this.connected) {\n    log2('---> 当前Connection对象已建立连接', this._noneStr);\n    return;\n  }\n\n  if (this._connecting) {\n    log2('---> 当前Connection对象正在建立连接中', this._noneStr);\n    return;\n  }\n\n  if (this.destroyed) {\n    throw new Error('---> 当前Connection实例已销毁，不能发起连接请求。');\n  }\n\n  lastConnectTime = Date.now();\n\n  if (domWindow.postMessage) {\n    this._source = domWindow;\n  } else if (domWindow.contentWindow.postMessage) {\n    this._source = domWindow.contentWindow;\n  }\n\n  if (!this._source) {\n    throw new Error('参数对象 domWindow 不可用，postMessage方法不存在');\n  }\n\n  this._cicId = 'cic_' + Date.now();\n  this._connecting = true;\n\n  // In IE, postmessage will block the process, so need setTimeout\n  window.setTimeout(() => {\n    postMessage(this._source, {\n      cicId: this._cicId,\n      msgType: 'ping'\n    });\n  }, 0)\n\n  clear(this._timeoutId, this._noneStr);\n\n  this._timeoutId = window.setTimeout(() => {\n    this._connecting = false;\n    this.connect(domWindow);\n  }, 2000);\n};\n\nConnection.prototype.sendMsg = function(data) {\n  if (!this.connected) {\n    throw new Error('连接尚未建立，请添加 onConnect 回调，确定建立连接后才可发送消息');\n  }\n\n  postMessage(this._source, {\n    cicId: this._cicId,\n    msgType: 'message',\n    data\n  });\n};\n\nmodule.exports = Connection;"],"sourceRoot":""}