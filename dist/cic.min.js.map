{"version":3,"sources":["webpack://Cic/webpack/universalModuleDefinition","webpack://Cic/webpack/bootstrap","webpack://Cic/./node_modules/es5-polyfill/dist/polyfill.js","webpack://Cic/./src/index.js","webpack://Cic/./src/Connection.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","global","Function","oThis","TypeError","args","Array","slice","arguments","fToBind","fNOP","fBound","apply","concat","defineGetter","defineSetter","lookupGetter","lookupSetter","prototypeOfObject","owns","isEnumerable","propertyIsEnumerable","toStr","toString","supportsAccessors","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","hasDontEnumBug","dontEnums","dontEnumsLength","isPrimitive","getPrototypeOf","proto","__proto__","constructor","keys","length","obj","prop","result","push","getOwnPropertyNames","getOwnPropertyDescriptorFallback","doesGetOwnPropertyDescriptorWork","sentinel","getOwnPropertyDescriptor","err","getOwnPropertyDescriptorWorksOnObject","document","createElement","descriptor","configurable","notPrototypeOfObject","setter","set","writable","freezeObject","doesDefinePropertyWork","exception","definePropertyWorksOnObject","definePropertyWorksOnDom","definePropertyFallback","definePropertiesFallback","defineProperties","hasGetter","hasSetter","properties","createEmpty","supportsProto","empty","domain","ActiveXObject","shouldUseActiveX","xDoc","write","close","parentWindow","getEmptyViaActiveX","iframe","parent","body","documentElement","style","display","appendChild","src","contentWindow","removeChild","getEmptyViaIFrame","isPrototypeOf","toLocaleString","valueOf","Empty","Type","seal","freeze","preventExtensions","isSealed","isFrozen","isExtensible","returnValue","isArray","arg","forEach","callback","thisArg","T","k","O","len","kValue","every","ctx","fill","start","relativeStart","Math","max","min","end","relativeEnd","undefined","final","filter","res","val","indexOf","searchElement","fromIndex","abs","lastIndexOf","Number","floor","map","A","mappedValue","reduce","reduceRight","some","window","TextRectangle","right","left","bottom","top","Date","now","getTime","toISOString","pad","number","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","toFixed","innerText","getElementsByClassName","querySelectorAll","classNames","String","replace","HTMLDocument","Element","CustomEvent","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","matches","matchesVenders","matchesSelector","selector","ownerDocument","item","unlistenableWindowEvents","click","dblclick","keyup","keypress","keydown","mousedown","mouseup","mousemove","mouseover","mouseenter","mouseleave","mouseout","storage","storagecommit","textinput","existingProto","Window","type","eventInitDict","Error","initEvent","createEventObject","addEventListener","listener","element","_events","eventElement","list","events","index","preventDefault","stopPropagation","cancelBubble","stopImmediatePropagation","cancelImmediate","currentTarget","target","srcElement","relatedTarget","fromElement","toElement","timeStamp","clientX","pageX","scrollLeft","pageY","clientY","scrollTop","attachEvent","removeEventListener","splice","detachEvent","dispatchEvent","cancelBubbleEvent","fireEvent","error","nodeType","parentNode","readyState","getPixelSize","fontSize","rootSize","sizeWithSuffix","size","parseFloat","suffix","split","test","parentElement","currentStyle","clientWidth","clientHeight","setShortStyleProperty","borderSuffix","b","join","CSSStyleDeclaration","getComputedStyle","getPropertyPriority","getPropertyValue","removeProperty","setProperty","getPropertyCSSValue","node","head","getElementsByTagName","tag","trim","doc","docEl","innerWidth","innerHeight","pageXOffset","scrollX","pageYOffset","scrollY","clientLeft","clientTop","Connection","require","createConnection","noneStr","log2","msg","input","console","log","JSON","stringify","addMsgListener","msgType","removeMsgListener","dettachEvent","postMessage","clear","timeoutId","clearTimeout","connected","destroyed","_noneStr","_disconnectListeners","_connectListeners","_messageListeners","_connecting","_cicId","_source","_timeoutId","__onMessage","_onMessage","__onBeforeUnload","_onBeforeUnload","data","evtData","parse","cicId","source","setTimeout","fn","onConnect","offConnect","f","onDisconnect","offDisconnect","onMessage","offMessage","destroy","disconnect","connect","domWindow","sendMsg"],"mappings":"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","file":"cic.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Cic\"] = factory();\n\telse\n\t\troot[\"Cic\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"tjUo\");\n","/**\n * polyfill for Function\n */\n\n// from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\nif (!Function.prototype.bind) {\n  Function.prototype.bind = function (oThis) {\n    if (typeof this !== 'function') {\n      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n    }\n    var args = Array.prototype.slice.call(arguments, 1);\n    var fToBind = this;\n    var fNOP = function () {};\n    var fBound = function () {\n      return fToBind.apply(this instanceof fNOP ? this : oThis, args.concat(Array.prototype.slice.call(arguments)));\n    };\n\n    if (this.prototype) {\n      fNOP.prototype = this.prototype;\n    }\n    fBound.prototype = new fNOP();\n    return fBound;\n  };\n}\n/**\n * polyfill for Object\n */\n\n// from https://github.com/es-shims/es5-shim/blob/master/es5-sham.js\n(function () {\n  var prototypeOfObject = Object.prototype;\n  var call = Function.call;\n  var owns = call.bind(prototypeOfObject.hasOwnProperty);\n  var isEnumerable = call.bind(prototypeOfObject.propertyIsEnumerable);\n  var toStr = call.bind(prototypeOfObject.toString);\n\n  var defineGetter;\n  var defineSetter;\n  var lookupGetter;\n  var lookupSetter;\n  var supportsAccessors = owns(prototypeOfObject, '__defineGetter__');\n  if (supportsAccessors) {\n    /* eslint-disable no-underscore-dangle, no-restricted-properties */\n    defineGetter = call.bind(prototypeOfObject.__defineGetter__);\n    defineSetter = call.bind(prototypeOfObject.__defineSetter__);\n    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);\n    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);\n    /* eslint-enable no-underscore-dangle, no-restricted-properties */\n  }\n\n  var isPrimitive = function isPrimitive(o) {\n    return o == null || (typeof o !== 'object' && typeof o !== 'function');\n  };\n\n  if (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function getPrototypeOf(object) {\n      var proto = object.__proto__;\n      if (proto || proto === null) {\n        return proto;\n      }\n      if (toStr(object.constructor) === '[object Function]') {\n        return object.constructor.prototype;\n      }\n      if (object instanceof Object) {\n        return prototypeOfObject;\n      }\n      return null;\n    };\n  }\n\n  if (!Object.keys) {\n    Object.keys = (function() {\n      var hasOwnProperty = Object.prototype.hasOwnProperty;\n      var hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString');\n      var dontEnums = [\n        'toString',\n        'toLocaleString',\n        'valueOf',\n        'hasOwnProperty',\n        'isPrototypeOf',\n        'propertyIsEnumerable',\n        'constructor'\n      ];\n      var dontEnumsLength = dontEnums.length;\n\n      return function (obj) {\n        if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n          throw new TypeError('Object.keys called on non-object');\n        }\n        var result = [], prop, i;\n\n        for (prop in obj) {\n          if (hasOwnProperty.call(obj, prop)) {\n            result.push(prop);\n          }\n        }\n        if (hasDontEnumBug) {\n          for (i = 0; i < dontEnumsLength; i++) {\n            if (hasOwnProperty.call(obj, dontEnums[i])) {\n              result.push(dontEnums[i]);\n            }\n          }\n        }\n        return result;\n      };\n    }());\n  }\n\n  if (!Object.getOwnPropertyNames) {\n    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {\n      if (object !== Object(object)) {\n        throw TypeError('Object.getOwnPropertyNames called on non-object: ' + object);\n      }\n      return Object.keys(object);\n    };\n  }\n\n  var doesGetOwnPropertyDescriptorWork = function doesGetOwnPropertyDescriptorWork(object) {\n    try {\n      object.sentinel = 0;\n      return Object.getOwnPropertyDescriptor(object, 'sentinel').value === 0;\n    } catch (err) {\n      return false;\n    }\n  };\n  var getOwnPropertyDescriptorFallback;\n  if (Object.defineProperty) {\n    var getOwnPropertyDescriptorWorksOnObject = doesGetOwnPropertyDescriptorWork({});\n    var getOwnPropertyDescriptorWorksOnDom = typeof document === 'undefined' ||\n      doesGetOwnPropertyDescriptorWork(document.createElement('div'));\n    if (!getOwnPropertyDescriptorWorksOnDom || !getOwnPropertyDescriptorWorksOnObject) {\n      getOwnPropertyDescriptorFallback = Object.getOwnPropertyDescriptor;\n    }\n  }\n  if (!Object.getOwnPropertyDescriptor || getOwnPropertyDescriptorFallback) {\n    var ERR_NON_OBJECT = 'Object.getOwnPropertyDescriptor called on a non-object: ';\n    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n      if (isPrimitive(object)) {\n        throw new TypeError(ERR_NON_OBJECT + object);\n      }\n      if (getOwnPropertyDescriptorFallback) {\n        try {\n          return getOwnPropertyDescriptorFallback.call(Object, object, property);\n        } catch (err) {\n\n        }\n      }\n      var descriptor;\n      if (!owns(object, property)) {\n        return descriptor;\n      }\n      descriptor = {\n        enumerable: isEnumerable(object, property),\n        configurable: true\n      };\n      if (supportsAccessors) {\n        var prototype = object.__proto__;\n        var notPrototypeOfObject = object !== prototypeOfObject;\n        if (notPrototypeOfObject) {\n          object.__proto__ = prototypeOfObject;\n        }\n        var getter = lookupGetter(object, property);\n        var setter = lookupSetter(object, property);\n        if (notPrototypeOfObject) {\n          object.__proto__ = prototype;\n        }\n        if (getter || setter) {\n          if (getter) {\n            descriptor.get = getter;\n          }\n          if (setter) {\n            descriptor.set = setter;\n          }\n          return descriptor;\n        }\n      }\n      descriptor.value = object[property];\n      descriptor.writable = true;\n      return descriptor;\n    };\n  }\n\n  var doesDefinePropertyWork = function doesDefinePropertyWork(object) {\n    try {\n      Object.defineProperty(object, 'sentinel', {});\n      return 'sentinel' in object;\n    } catch (exception) {\n      return false;\n    }\n  };\n\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({});\n    var definePropertyWorksOnDom = typeof document === 'undefined' ||\n      doesDefinePropertyWork(document.createElement('div'));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {\n      var definePropertyFallback = Object.defineProperty;\n      var definePropertiesFallback = Object.defineProperties;\n    }\n  }\n\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = 'Property description must be an object: ';\n    var ERR_NON_OBJECT_TARGET = 'Object.defineProperty called on non-object: ';\n    var ERR_ACCESSORS_NOT_SUPPORTED = 'getters & setters can not be defined on this javascript engine';\n    Object.defineProperty = function defineProperty(object, property, descriptor) {\n      if (isPrimitive(object)) {\n        throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      }\n      if (isPrimitive(descriptor)) {\n        throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n      }\n      if (definePropertyFallback) {\n        try {\n          return definePropertyFallback.call(Object, object, property, descriptor);\n        } catch (exception) {\n        }\n      }\n      if ('value' in descriptor) {\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          delete object[property];\n          object[property] = descriptor.value;\n          object.__proto__ = prototype;\n        } else {\n          object[property] = descriptor.value;\n        }\n      } else {\n        var hasGetter = 'get' in descriptor;\n        var hasSetter = 'set' in descriptor;\n        if (!supportsAccessors && (hasGetter || hasSetter)) {\n          return object;\n        }\n        // If we got that far then getters and setters can be defined !!\n        if (hasGetter) {\n          defineGetter(object, property, descriptor.get);\n        }\n        if (hasSetter) {\n          defineSetter(object, property, descriptor.set);\n        }\n      }\n      return object;\n    };\n  }\n\n  if (!Object.defineProperties || definePropertiesFallback) {\n    Object.defineProperties = function defineProperties(object, properties) {\n      if (definePropertiesFallback) {\n        try {\n          return definePropertiesFallback.call(Object, object, properties);\n        } catch (exception) {\n        }\n      }\n      var keys = Object.keys(properties);\n      for (var i = 0; i < keys.length; i++) {\n        var property = keys[i];\n        if (property !== '__proto__') {\n          Object.defineProperty(object, property, properties[property]);\n        }\n      }\n      return object;\n    };\n  }\n\n  if (!Object.create) {\n    var createEmpty;\n    var supportsProto = !({ __proto__: null } instanceof Object);\n    /* global ActiveXObject */\n    var shouldUseActiveX = function () {\n      if (!document.domain) {\n        return false;\n      }\n      try {\n        return !!new ActiveXObject('htmlfile');\n      } catch (exception) {\n        return false;\n      }\n    };\n\n    var getEmptyViaActiveX = function () {\n      var empty;\n      var xDoc;\n      xDoc = new ActiveXObject('htmlfile');\n      var script = 'script';\n      xDoc.write('<' + script + '></' + script + '>');\n      xDoc.close();\n\n      empty = xDoc.parentWindow.Object.prototype;\n      xDoc = null;\n\n      return empty;\n    };\n\n    var getEmptyViaIFrame = function () {\n      var iframe = document.createElement('iframe');\n      var parent = document.body || document.documentElement;\n      var empty;\n\n      iframe.style.display = 'none';\n      parent.appendChild(iframe);\n      // eslint-disable-next-line no-script-url\n      iframe.src = 'javascript:';\n\n      empty = iframe.contentWindow.Object.prototype;\n      parent.removeChild(iframe);\n      iframe = null;\n\n      return empty;\n    };\n\n    /* global document */\n    if (supportsProto || typeof document === 'undefined') {\n      createEmpty = function () {\n        return { __proto__: null };\n      };\n    } else {\n      createEmpty = function () {\n        var empty = shouldUseActiveX() ? getEmptyViaActiveX() : getEmptyViaIFrame();\n\n        delete empty.constructor;\n        delete empty.hasOwnProperty;\n        delete empty.propertyIsEnumerable;\n        delete empty.isPrototypeOf;\n        delete empty.toLocaleString;\n        delete empty.toString;\n        delete empty.valueOf;\n\n        var Empty = function Empty() { };\n        Empty.prototype = empty;\n        // short-circuit future calls\n        createEmpty = function () {\n          return new Empty();\n        };\n        return new Empty();\n      };\n    }\n\n    Object.create = function create (prototype, properties) {\n      var object;\n      var Type = function () { };\n      if (prototype === null) {\n        object = createEmpty();\n      } else {\n        if (prototype !== null && isPrimitive(prototype)) {\n          throw new TypeError('Object prototype may only be an Object or null');\n        }\n        Type.prototype = prototype;\n        object = new Type();\n        object.__proto__ = prototype;\n      }\n\n      if (properties !== void 0) {\n        Object.defineProperties(object, properties);\n      }\n\n      return object;\n    };\n  }\n\n  if (!Object.seal) {\n    Object.seal = function seal(object) {\n      if (Object(object) !== object) {\n        throw new TypeError('Object.seal can only be called on Objects.');\n      }\n      return object;\n    };\n  }\n\n  if (!Object.freeze) {\n    Object.freeze = function freeze(object) {\n      if (Object(object) !== object) {\n        throw new TypeError('Object.freeze can only be called on Objects.');\n      }\n      return object;\n    };\n  }\n\n  try {\n    Object.freeze(function () { });\n  } catch (exception) {\n    Object.freeze = (function (freezeObject) {\n      return function freeze(object) {\n        if (typeof object === 'function') {\n          return object;\n        }\n        return freezeObject(object);\n      };\n    })(Object.freeze);\n  }\n\n  if (!Object.preventExtensions) {\n    Object.preventExtensions = function preventExtensions(object) {\n      if (Object(object) !== object) {\n        throw new TypeError('Object.preventExtensions can only be called on Objects.');\n      }\n      return object;\n    };\n  }\n\n  if (!Object.isSealed) {\n    Object.isSealed = function isSealed(object) {\n      if (Object(object) !== object) {\n        throw new TypeError('Object.isSealed can only be called on Objects.');\n      }\n      return false;\n    };\n  }\n\n  if (!Object.isFrozen) {\n    Object.isFrozen = function isFrozen(object) {\n      if (Object(object) !== object) {\n        throw new TypeError('Object.isFrozen can only be called on Objects.');\n      }\n      return false;\n    };\n  }\n\n  if (!Object.isExtensible) {\n    Object.isExtensible = function isExtensible(object) {\n      if (Object(object) !== object) {\n        throw new TypeError('Object.isExtensible can only be called on Objects.');\n      }\n      var name = '';\n      while (owns(object, name)) {\n        name += '?';\n      }\n      object[name] = true;\n      var returnValue = owns(object, name);\n      delete object[name];\n      return returnValue;\n    };\n  }\n})();\n\n/**\n * polyfill for Array\n */\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\nif (!Array.isArray) {\n  Array.isArray = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function (callback, thisArg) {\n    var T, k;\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.forEach called on null or undefined');\n    }\n    var O = Object(this);\n    var len = O.length >>> 0;\n    if (Object.prototype.toString.call(callback) != '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n    k = 0;\n    while (k < len) {\n      var kValue;\n      if (k in O) {\n        kValue = O[k];\n        callback.call(T, kValue, k, O);\n      }\n      k++;\n    }\n  };\n}\n\n// form https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every\nif (!Array.prototype.every) {\n  Array.prototype.every = function (callback) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.every called on null or undefined');\n    }\n\n    var O = Object(this);\n    var len = O.length >>> 0;\n    if (Object.prototype.toString.call(callback) != '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    var ctx = arguments.length >= 2 ? arguments[1] : void 0;\n    for (var i = 0; i < len; i++) {\n      if (i in O && !callback.call(ctx, O[i], i, O)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/fill\nif (!Array.prototype.fill) {\n  Array.prototype.fill = function (value) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.fill called on null or undefined');\n    }\n    var O = Object(this);\n    var len = O.length >>> 0;\n    var start = arguments[1];\n    var relativeStart = start >> 0;\n    var k = relativeStart < 0 ?\n      Math.max(len + relativeStart, 0) :\n      Math.min(relativeStart, len);\n\n    var end = arguments[2];\n    var relativeEnd = end === undefined ? len : end >> 0;\n    var final = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);\n    while (k < final) {\n      O[k] = value;\n      k++;\n    }\n\n    return O;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\nif (!Array.prototype.filter) {\n  Array.prototype.filter = function (callback) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.filter called on null or undefined');\n    }\n    var O = Object(this);\n    var len = O.length >>> 0;\n    if (Object.prototype.toString.call(callback) != '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    var res = [];\n    var ctx = arguments.length >= 2 ? arguments[1] : void 0;\n    for (var i = 0; i < len; i++) {\n      if (i in O) {\n        var val = O[i];\n        if (callback.call(ctx, val, i, O)) {\n          res.push(val);\n        }\n      }\n    }\n    return res;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function (searchElement, fromIndex) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.indexOf called on null or undefined');\n    }\n    var k;\n    var O = Object(this);\n    var len = O.length >>> 0;\n    if (len === 0) {\n      return -1;\n    }\n    var n = fromIndex | 0;\n    if (n >= len) {\n      return -1;\n    }\n    k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n    while (k < len) {\n      if (k in O && O[k] === searchElement) {\n        return k;\n      }\n      k++;\n    }\n    return -1;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf\nif (!Array.prototype.lastIndexOf) {\n  Array.prototype.lastIndexOf = function(searchElement) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.lastIndexOf called on null or undefined');\n    }\n    var n, k;\n    var t = Object(this);\n    var len = t.length >>> 0;\n    if (len === 0) {\n      return -1;\n    }\n    n = len - 1;\n    if (arguments.length > 1) {\n      n = Number(arguments[1]);\n      if (n !== n) {\n        n = 0;\n      } else if (n != 0 && n != (1 / 0) && n != -(1 / 0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n      }\n    }\n    k = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);\n    for (;k >= 0; k--) {\n      if (k in t && t[k] === searchElement) {\n        return k;\n      }\n    }\n    return -1;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map\nif (!Array.prototype.map) {\n  Array.prototype.map = function (callback, thisArg) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.map called on null or undefined');\n    }\n    var T, A, k;\n    var O = Object(this);\n    var len = O.length >>> 0;\n    if (Object.prototype.toString.call(callback) !== '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    if (thisArg) {\n      T = thisArg;\n    }\n    A = new Array(len);\n    k = 0;\n    while (k < len) {\n      var kValue, mappedValue;\n      if (k in O) {\n        kValue = O[k];\n        mappedValue = callback.call(T, kValue, k, O);\n        A[ k ] = mappedValue;\n      }\n      k++;\n    }\n    return A;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\nif (!Array.prototype.reduce) {\n  Array.prototype.reduce = function (callback) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.reduce called on null or undefined');\n    }\n    if (Object.prototype.toString.call(callback) !== '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    var t = Object(this), len = t.length >>> 0, k = 0, value;\n    if (arguments.length >= 2) {\n      value = arguments[1];\n    } else {\n      while (k < len && !(k in t)) {\n        k++;\n      }\n      if (k >= len) {\n        throw new TypeError('Reduce of empty array with no initial value');\n      }\n      value = t[k++];\n    }\n    for (; k < len; k++) {\n      if (k in t) {\n        value = callback(value, t[k], k, t);\n      }\n    }\n    return value;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight\nif (!Array.prototype.reduceRight) {\n  Array.prototype.reduceRight = function (callback) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.reduceRight called on null or undefined');\n    }\n    if (Object.prototype.toString.call(callback) !== '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    var t = Object(this), len = t.length >>> 0, k = len - 1, value;\n    if (arguments.length >= 2) {\n      value = arguments[1];\n    } else {\n      while (k >= 0 && !(k in t)) {\n        k--;\n      }\n      if (k < 0) {\n        throw new TypeError('Reduce of empty array with no initial value');\n      }\n      value = t[k--];\n    }\n    for (; k >= 0; k--) {\n      if (k in t) {\n        value = callback(value, t[k], k, t);\n      }\n    }\n    return value;\n  };\n}\n\n// from https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some\nif (!Array.prototype.some) {\n  Array.prototype.some = function (callback) {\n    if (this === void 0 || this === null) {\n      throw new TypeError('Array.prototype.reduceRight called on null or undefined');\n    }\n    if (Object.prototype.toString.call(callback) !== '[object Function]') {\n      throw new TypeError(callback + ' is not a function');\n    }\n    var t = Object(this);\n    var len = t.length >>> 0;\n    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n    for (var i = 0; i < len; i++) {\n      if (i in t && callback.call(thisArg, t[i], i, t)) {\n        return true;\n      }\n    }\n    return false;\n  };\n}\n\n//----------------------------------------------------------------------\n//\n// CSSOM View Module\n// https://dev.w3.org/csswg/cssom-view/\n//\n//----------------------------------------------------------------------\n\n// Fix for IE8-'s Element.getBoundingClientRect()\n(function (global) {\n  if ('TextRectangle' in global && !('width' in global.TextRectangle.prototype)) {\n    Object.defineProperties(global.TextRectangle.prototype, {\n      'width': { get: function () { return this.right - this.left; } },\n      'height': { get: function () { return this.bottom - this.top; } }\n    });\n  }\n})(window);\n/**\n * polyfill for Date\n */\n\n// from https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date/now\nif (!Date.now) {\n  Date.now = function now () {\n    return new Date().getTime();\n  };\n}\n\n// from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString\nif (!Date.prototype.toISOString) {\n  (function() {\n    function pad(number) {\n      if (number < 10) {\n        return '0' + number;\n      }\n      return number;\n    }\n    Date.prototype.toISOString = function () {\n      return this.getUTCFullYear() +\n        '-' + pad(this.getUTCMonth() + 1) +\n        '-' + pad(this.getUTCDate()) +\n        'T' + pad(this.getUTCHours()) +\n        ':' + pad(this.getUTCMinutes()) +\n        ':' + pad(this.getUTCSeconds()) +\n        '.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +\n        'Z';\n    };\n  }());\n}\n/**\n * polyfill for DOM\n */\n\n(function (global) {\n  if (!('document' in global)) {\n    return;\n  }\n  var document = global.document;\n\n  // IE8- document.getElementsByClassName\n  if (!document.getElementsByClassName && document.querySelectorAll) {\n    var getElementsByClassName = function (classNames) {\n      classNames = String(classNames).replace(/^|\\s+/g, '.');\n      return this.querySelectorAll(classNames);\n    };\n    void [HTMLDocument, Element].forEach(function (o) {\n      o.prototype.getElementsByClassName = getElementsByClassName;\n    });\n  }\n\n  // IE CustomEvent\n  if (!('CustomEvent' in global) || typeof global.CustomEvent !== 'function') {\n    var CustomEvent = function (event, params) {\n      params = params || { bubbles: false, cancelable: false, detail: undefined };\n      var evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n      return evt;\n    };\n    CustomEvent.prototype = global.Event.prototype;\n    global.CustomEvent = CustomEvent;\n  }\n\n  // Element.matches\n  // from https://developer.mozilla.org/en/docs/Web/API/Element/matches\n  (function () {\n    if (!('Element' in global) || Element.prototype.matches) {\n      return;\n    }\n    var matchesVenders = ['ms', 'o', 'moz', 'webkit'];\n    var matchesSelectorSuffix = 'MatchesSelector';\n    for (var i = 0; i < matchesVenders.length; i++) {\n      var matchesSelector = matchesVenders[i] + matchesSelectorSuffix;\n      if (matchesSelector in Element.prototype) {\n        Element.prototype.matches = Element.prototype[matchesSelector];\n        return;\n      }\n    }\n    if (document.querySelectorAll) {\n      Element.prototype.matches = function matches (selector) {\n        var matches = (this.document || this.ownerDocument).querySelectorAll(selector);\n        var i = matches.length;\n        while (--i >= 0 && matches.item(i) !== this) {}\n        return i > -1;\n      };\n    }\n  })();\n\n  // Node.textContent\n  if (Object.defineProperty\n    && Object.getOwnPropertyDescriptor\n    && Object.getOwnPropertyDescriptor(Element.prototype, 'textContent')\n    && !Object.getOwnPropertyDescriptor(Element.prototype, 'textContent').get) {\n    (function() {\n      var innerText = Object.getOwnPropertyDescriptor(Element.prototype, 'innerText');\n      Object.defineProperty(Element.prototype, 'textContent', {\n        get: function() {\n          return innerText.get.call(this);\n        },\n        set: function(s) {\n          return innerText.set.call(this, s);\n        }\n      });\n    })();\n  }\n})(window);\n\n/**\n * polyfill for DOM Event\n */\n\n// from https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/Event/polyfill.js\n(function (global) {\n  if (('Event' in global) && typeof global.Event === 'function') {\n    return;\n  }\n  var unlistenableWindowEvents = {\n    click: 1,\n    dblclick: 1,\n    keyup: 1,\n    keypress: 1,\n    keydown: 1,\n    mousedown: 1,\n    mouseup: 1,\n    mousemove: 1,\n    mouseover: 1,\n    mouseenter: 1,\n    mouseleave: 1,\n    mouseout: 1,\n    storage: 1,\n    storagecommit: 1,\n    textinput: 1\n  };\n  var existingProto = (global.Event && global.Event.prototype) || null;\n  global.Event = Window.prototype.Event = function Event (type, eventInitDict) {\n    if (!type) {\n      throw new Error('Not enough arguments');\n    }\n    var event;\n    if ('createEvent' in document) {\n      event = document.createEvent('Event');\n      var bubbles = eventInitDict && eventInitDict.bubbles !== undefined ? eventInitDict.bubbles : false;\n      var cancelable = eventInitDict && eventInitDict.cancelable !== undefined ? eventInitDict.cancelable : false;\n      event.initEvent(type, bubbles, cancelable);\n      return event;\n    }\n    event = document.createEventObject();\n    event.type = type;\n    event.bubbles = eventInitDict && eventInitDict.bubbles !== undefined ? eventInitDict.bubbles : false;\n    event.cancelable = eventInitDict && eventInitDict.cancelable !== undefined ? eventInitDict.cancelable : false;\n    return event;\n  };\n  if (existingProto) {\n    Object.defineProperty(global.Event, 'prototype', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: existingProto\n    });\n  }\n  if (!('createEvent' in document)) {\n    var addEventListener = function (type, listener) {\n      var element = this;\n      if (element === global && type in unlistenableWindowEvents) {\n        throw new Error('In IE8 the event: ' + type + ' is not available on the window object.');\n      }\n      if (!element._events) {\n        element._events = {};\n      }\n      if (!element._events[type]) {\n        element._events[type] = function (event) {\n          var list = element._events[event.type].list;\n          var events = list.slice();\n          var index = -1;\n          var length = events.length;\n          var eventElement;\n          event.preventDefault = function preventDefault () {\n            if (event.cancelable !== false) {\n              event.returnValue = false;\n            }\n          };\n          event.stopPropagation = function stopPropagation () {\n            event.cancelBubble = true;\n          };\n          event.stopImmediatePropagation = function stopImmediatePropagation () {\n            event.cancelBubble = true;\n            event.cancelImmediate = true;\n          };\n          event.currentTarget = element;\n          event.target = event.target || event.srcElement || element;\n          event.relatedTarget = event.fromElement ? (event.fromElement === event.target) ? event.toElement : event.fromElement : null;\n          event.timeStamp = new Date().getTime();\n          if (event.clientX) {\n            event.pageX = event.clientX + document.documentElement.scrollLeft;\n            event.pageY = event.clientY + document.documentElement.scrollTop;\n          }\n          while (++index < length && !event.cancelImmediate) {\n            if (index in events) {\n              eventElement = events[index];\n              if (list.indexOf(eventElement) !== -1 && typeof eventElement === 'function') {\n                eventElement.call(element, event);\n              }\n            }\n          }\n        };\n        element._events[type].list = [];\n        if (element.attachEvent) {\n          element.attachEvent('on' + type, element._events[type]);\n        }\n      }\n      element._events[type].list.push(listener);\n    };\n\n    var removeEventListener = function (type, listener) {\n      var element = this;\n      var index;\n      if (element._events && element._events[type] && element._events[type].list) {\n        index = element._events[type].list.indexOf(listener);\n        if (index !== -1) {\n          element._events[type].list.splice(index, 1);\n          if (!element._events[type].list.length) {\n            if (element.detachEvent) {\n              element.detachEvent('on' + type, element._events[type]);\n            }\n            delete element._events[type];\n          }\n        }\n      }\n    };\n\n    var dispatchEvent = function (event) {\n      if (!arguments.length) {\n        throw new Error('Not enough arguments');\n      }\n      if (!event || typeof event.type !== 'string') {\n        throw new Error('DOM Events Exception 0');\n      }\n      var element = this, type = event.type;\n      try {\n        if (!event.bubbles) {\n          event.cancelBubble = true;\n          var cancelBubbleEvent = function (event) {\n            event.cancelBubble = true;\n            (element || window).detachEvent('on' + type, cancelBubbleEvent);\n          };\n          this.attachEvent('on' + type, cancelBubbleEvent);\n        }\n        this.fireEvent('on' + type, event);\n      } catch (error) {\n        event.target = element;\n        do {\n          event.currentTarget = element;\n          if ('_events' in element && typeof element._events[type] === 'function') {\n            element._events[type].call(element, event);\n          }\n          if (typeof element['on' + type] === 'function') {\n            element['on' + type].call(element, event);\n          }\n          element = element.nodeType === 9 ? element.parentWindow : element.parentNode;\n        } while (element && !event.cancelBubble);\n      }\n      return true;\n    };\n\n    void [Window, HTMLDocument, Element].forEach(function (o) {\n      o.prototype.addEventListener = addEventListener;\n      o.prototype.removeEventListener = removeEventListener;\n      o.prototype.dispatchEvent = dispatchEvent;\n    });\n\n    // 添加DOMContentLoaded事件\n    document.attachEvent('onreadystatechange', function() {\n      if (document.readyState === 'complete') {\n        document.dispatchEvent(new Event('DOMContentLoaded', {\n          bubbles: true\n        }));\n      }\n    });\n  }\n})(window);\n\n/**\n * polyfill for getComputedStyle\n */\n\n// from https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/getComputedStyle/polyfill.js\n(function (global) {\n  if ('getComputedStyle' in global && typeof global.getComputedStyle === 'function') {\n    return;\n  }\n  function getPixelSize (element, style, property, fontSize) {\n    var sizeWithSuffix = style[property];\n    var size = parseFloat(sizeWithSuffix);\n    var suffix = sizeWithSuffix.split(/\\d/)[0];\n    var rootSize;\n    fontSize = (fontSize !== null) ? fontSize :\n      (/%|em/.test(suffix) && element.parentElement) ?\n        getPixelSize(element.parentElement, element.parentElement.currentStyle, 'fontSize', null) : 16;\n    rootSize = property === 'fontSize' ? fontSize :\n      /width/i.test(property) ? element.clientWidth : element.clientHeight;\n    return (suffix ==='em') ? size * fontSize :\n      (suffix === 'in') ? size * 96 :\n        (suffix === 'pt') ? size * 96 / 72 :\n          (suffix === '%') ? size / 100 * rootSize : size;\n  }\n\n  function setShortStyleProperty (style, property) {\n    var borderSuffix = property === 'border' ? 'Width' : '';\n    var t = property + 'Top' + borderSuffix;\n    var r = property + 'Right' + borderSuffix;\n    var b = property + 'Bottom' + borderSuffix;\n    var l = property + 'Left' + borderSuffix;\n    style[property] = (style[t] == style[r] == style[b] == style[l] ? [style[t]]\n      : style[t] == style[b] && style[l] == style[r] ? [style[t], style[r]]\n      : style[l] == style[r] ? [style[t], style[r], style[b]]\n      : [style[t], style[r], style[b], style[l]]).join(' ');\n  }\n\n  function CSSStyleDeclaration (element) {\n    var currentStyle = element.currentStyle || {};\n    var style = this;\n    var fontSize = getPixelSize(element, currentStyle, 'fontSize', null);\n    for (var property in currentStyle) {\n      if (/width|height|margin.|padding.|border.+W/.test(property) && style[property] !== 'auto') {\n        style[property] = getPixelSize(element, currentStyle, property, fontSize) + 'px';\n      } else if (property === 'styleFloat') {\n        style['float'] = currentStyle[property];\n      } else {\n        style[property] = currentStyle[property];\n      }\n    }\n    setShortStyleProperty(style, 'margin');\n    setShortStyleProperty(style, 'padding');\n    setShortStyleProperty(style, 'border');\n    style.fontSize = fontSize + 'px';\n    return style;\n  }\n\n  CSSStyleDeclaration.prototype = {\n    constructor: CSSStyleDeclaration,\n    getPropertyPriority: function () { },\n    getPropertyValue: function (prop) {\n      return this[prop] || '';\n    },\n    item: function () { },\n    removeProperty: function () { },\n    setProperty: function () { },\n    getPropertyCSSValue: function () { }\n  };\n  global.getComputedStyle = function (node) {\n    return new CSSStyleDeclaration(node);\n  };\n})(window);\n/**\n * polyfill for IE8 in HTML\n * https://html.spec.whatwg.org\n */\n\n// document.head\ndocument.head = document.head || document.getElementsByTagName('head')[0];\n\n// HTML Tag shiv\nvoid [\n  'abbr', 'article', 'aside', 'audio', 'bdi', 'canvas', 'data', 'datalist',\n  'details', 'dialog', 'figcaption', 'figure', 'footer', 'header', 'hgroup',\n  'main', 'mark', 'meter', 'nav', 'output', 'picture', 'progress', 'section',\n  'summary', 'template', 'time', 'video'\n].forEach(function (tag) {\n  document.createElement(tag);\n});\n/**\n * polyfill for String\n */\n\nif (!String.prototype.trim) {\n  String.prototype.trim = function () {\n    return String(this).replace(/^\\s+/, '').replace(/\\s+$/, '');\n  };\n}\n/**\n * Polyfill for Viewport\n */\n\n(function (global) {\n  if ('innerWidth' in global && 'innerHeight' in global && 'pageXOffset' in global && 'pageYOffset' in global) {\n    return;\n  }\n  var doc = global.document;\n  var docEl = doc.documentElement;\n  var body = doc.body || doc.createElement('body');\n\n  function scrollX () {\n    return (docEl.scrollLeft || body.scrollLeft || 0) - (docEl.clientLeft || body.clientLeft || 0);\n  }\n\n  function scrollY () {\n    return (docEl.scrollTop || body.scrollTop || 0) - (docEl.clientTop || body.clientTop || 0);\n  }\n\n  Object.defineProperties(global, {\n    innerWidth: {\n      get: function () {\n        return docEl.clientWidth;\n      }\n    },\n    innerHeight: {\n      get: function () {\n        return docEl.clientHeight;\n      }\n    },\n    pageXOffset: {\n      get: scrollX\n    },\n    pageYOffset: {\n      get: scrollY\n    },\n    scrollX: {\n      get: scrollX\n    },\n    scrollY: {\n      get: scrollY\n    }\n  });\n})(window);","import \"es5-polyfill\";\n\nlet Connection = require('./Connection.js');\n\nmodule.exports = {\n  createConnection(noneStr = '') {\n    return new Connection(noneStr);\n  }\n}\n","function isString(input) {\n  return Object.prototype.toString.call(input) == '[object String]';\n}\n\nfunction log(msg, noneStr) {\n  // console && console.log && console.log(noneStr + ' ::: ' + (isString(msg) ?\n  //   msg :\n  //   JSON.stringify(msg)));\n}\n\nfunction log2(msg, noneStr) {\n  console && console.log && console.log(noneStr + ' ::: ' + (isString(msg) ?\n    msg :\n    JSON.stringify(msg)));\n}\n\nfunction addMsgListener(msgType, callback) {\n  if ('addEventListener' in document) {\n    window.addEventListener(msgType, callback, false);\n  } else if ('attachEvent' in document) {\n    window.attachEvent(`on${msgType}`, callback);\n  }\n}\n\nfunction removeMsgListener(msgType, callback) {\n  if ('addEventListener' in document) {\n    window.removeEventListener(msgType, callback, false);\n  } else if ('attachEvent' in document) {\n    window.dettachEvent(`on${msgType}`, callback);\n  }\n}\n\nfunction postMessage(target, msg) {\n  target.postMessage(JSON.stringify(msg), '*');\n}\n\nfunction clear(timeoutId, noneStr) {\n  log(`clear timeoutId = ${timeoutId}`, noneStr);\n  window.clearTimeout(timeoutId);\n}\n\nlet lastConnectTime = 0;\n\nfunction Connection(noneStr) {\n  this.connected = false;\n  this.destroyed = false;\n\n  this._noneStr = noneStr;\n  this._disconnectListeners = [];\n  this._connectListeners = [];\n  this._messageListeners = [];\n  this._connecting = false;\n  this._cicId = null;\n  this._source = null;\n  this._timeoutId = null;\n\n  this.__onMessage = this._onMessage.bind(this);\n  this.__onBeforeUnload = this._onBeforeUnload.bind(this);\n\n  addMsgListener('message', this.__onMessage);\n  addMsgListener('beforeunload', this.__onBeforeUnload);\n}\n\nConnection.prototype._onMessage = function(evt) {\n  if (!evt.data) {\n    return;\n  }\n\n  let evtData = JSON.parse(evt.data);\n\n  log(evtData, this._noneStr);\n\n  if (!evtData.cicId) {\n    return;\n  }\n\n  let { source } = evt;\n  let { cicId, msgType, data } = evtData;\n\n  if (msgType == 'ping') {\n    if (this._cicId || this._connecting || this.connected) {\n      return;\n    }\n\n    log('收到ping信号', this._noneStr);\n\n    this._cicId = cicId;\n    this._connecting = true;\n    this._source = source;\n\n    postMessage(source, {\n      cicId,\n      msgType: 'pong'\n    });\n  } else if (\n    msgType == 'pong' &&\n    this._connecting &&\n    !this.connected &&\n    this._cicId == cicId\n  ) {\n    this._connecting = false;\n    this.connected = true;\n    log('收到pong信号', this._noneStr);\n\n    clear(this._timeoutId, this._noneStr);\n    this._timeoutId = null;\n\n    postMessage(this._source, {\n      cicId,\n      msgType: 'pong_confirm'\n    });\n\n    setTimeout(() => {\n      this._connectListeners.forEach(function(fn) {\n        fn();\n      });\n    }, 0);\n  } else if (\n    msgType == 'pong_confirm' &&\n    this._connecting &&\n    cicId == this._cicId\n  ) {\n    log('收到pong_confirm信号', this._noneStr);\n\n    this.connected = true;\n    this._connecting = false;\n\n    setTimeout(() => {\n      this._connectListeners.forEach(function(fn) {\n        fn();\n      });\n    }, 0);\n  } else if (\n    msgType == 'disconnect' &&\n    cicId == this._cicId\n  ) {\n    log('收到disconnect信号', this._noneStr);\n\n    clear(this._timeoutId, this._noneStr);\n    this.connected = false;\n    this._connecting = false;\n\n    this._disconnectListeners.forEach(function(fn) {\n      fn();\n    });\n  } else if (\n    msgType == 'message' &&\n    this.connected &&\n    cicId == this._cicId\n  ) {\n    log('收到message信号', this._noneStr);\n    this._messageListeners.forEach(function(fn) {\n      fn(data);\n    });\n  }\n};\n\nConnection.prototype.onConnect = function(fn) {\n  if (this.destroyed) {\n    throw new Error('当前Connection已销毁');\n  }\n\n  this._connectListeners.push(fn);\n\n  if (this.connected) {\n    fn();\n  }\n};\n\nConnection.prototype.offConnect = function(fn) {\n  this._connectListeners = this._connectListeners.filter(function(f) {\n    return f != fn;\n  });\n};\n\nConnection.prototype.onDisconnect = function(fn) {\n  if (this.destroyed) {\n    throw new Error('当前Connection已销毁');\n  }\n\n  this._disconnectListeners.push(fn);\n};\n\nConnection.prototype.offDisconnect = function(fn) {\n  this._disconnectListeners = this._disconnectListeners.filter(function(f) {\n    return f != fn;\n  });\n};\n\nConnection.prototype.onMessage = function(fn) {\n  if (this.destroyed) {\n    throw new Error('当前Connection已销毁');\n  }\n\n  this._messageListeners.push(fn);\n};\n\nConnection.prototype.offMessage = function(fn) {\n  this._messageListeners = this._messageListeners.filter(function(f) {\n    return f != fn;\n  });\n};\n\nConnection.prototype._onBeforeUnload = function() {\n  log('beforeunload', this._noneStr);\n  this.destroy();\n};\n\nConnection.prototype.disconnect = function() {\n  clear(this._timeoutId, this._noneStr);\n  this._timeoutId = null;\n\n  if (this._source) {\n    postMessage(this._source, {\n      cicId: this._cicId,\n      msgType: 'disconnect'\n    });\n\n    this.connected = false;\n    this._connecting = false;\n  }\n};\n\nConnection.prototype.destroy = function() {\n  this.disconnect();\n\n  this.destroyed = true;\n  this._disconnectListeners.length = 0;\n  this._connectListeners.length = 0;\n  this._messageListeners.length = 0;\n  this._cicId = null;\n  this._source = null;\n  this._timeoutId = null;\n\n  removeMsgListener('message', this.__onMessage);\n  removeMsgListener('beforeunload', this.__onBeforeUnload);\n};\n\nConnection.prototype.connect = function(domWindow) {\n  log('----- duration = ' + (Date.now() - lastConnectTime), this._noneStr);\n\n  if (!domWindow) {\n    throw new Error('connect方法需要传入参数domWindow');\n  }\n\n  if (this.connected) {\n    log2('---> 当前Connection对象已建立连接', this._noneStr);\n    return;\n  }\n\n  if (this._connecting) {\n    log2('---> 当前Connection对象正在建立连接中');\n    return;\n  }\n\n  lastConnectTime = Date.now();\n\n  if (domWindow.postMessage) {\n    this._source = domWindow;\n  } else if (domWindow.contentWindow.postMessage) {\n    this._source = domWindow.contentWindow;\n  }\n\n  if (!this._source) {\n    throw new Error('参数对象 domWindow 不可用，postMessage方法不存在');\n  }\n\n  this._cicId = 'cic_' + Date.now();\n  this._connecting = true;\n\n  log('发送ping命令', this._noneStr);\n\n  postMessage(this._source, {\n    cicId: this._cicId,\n    msgType: 'ping'\n  });\n\n  clear(this._timeoutId, this._noneStr);\n\n  this._timeoutId = window.setTimeout(() => {\n    log2('正在尝试建立连接, this._cicId = ', this._noneStr);\n    this._connecting = false;\n    this.connect(domWindow);\n  }, 2000);\n\n  log(`<<< created this._timeoutId = ${this._timeoutId}`, this._noneStr);\n};\n\nConnection.prototype.sendMsg = function(data) {\n  if (!this.connected) {\n    throw new Error('连接尚未建立，请添加 onConnect 回调，确定建立连接后才可发送消息');\n  }\n\n  postMessage(this._source, {\n    cicId: this._cicId,\n    msgType: 'message',\n    data\n  });\n};\n\nmodule.exports = Connection;"],"sourceRoot":""}